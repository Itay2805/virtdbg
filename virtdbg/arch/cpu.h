#ifndef __VIRTDBG_CPU_H__
#define __VIRTDBG_CPU_H__

#include <stdbool.h>

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Other cpu related operations
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 * Pause the cpu for a bit, used around spinlocks
 * and alike
 */
void cpu_pause();

/**
 * Makes the cpu go to sleep until an interrupt
 * arrives
 */
void cpu_sleep();

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Memory fences and barriers
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 * Memory fence to serialize memory accesses
 */
void memory_barrier();

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Interrupt management
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
 * Disable interrupts on the current cpu
 */
void disable_interrupts();

/**
 * Enable interrupts on the current cpu
 */
void enable_interrupts();

/**
 * Checks if interrupts are enabled on the current cpu
 */
bool are_interrupts_enabled();


#endif //__VIRTDBG_CPU_H__
